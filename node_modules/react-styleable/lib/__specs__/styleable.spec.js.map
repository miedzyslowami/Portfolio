{"version":3,"sources":["../../src/__specs__/styleable.spec.js"],"names":["css","content","mkFixture","Subject","props","aDefault","React","Component","defaultProps","mkFixtureWithReqPropTypes","aReqProp","propTypes","PropTypes","string","isRequired","mkFunctionFixture","subject","mkFunctionFixtureWithReqPropTypes","describe","it","defaultStylesheet","component","TestUtils","renderIntoDocument","should","eql","throw","refs","not","have","property","origCss","overrideCss","unusedSelector","e","message","match","done","compose","newHash","ReactDOM","findDOMNode","className","exist","children","textContent"],"mappings":"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","file":"styleable.spec.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport TestUtils from 'react-dom/test-utils'\nimport PropTypes from 'prop-types'\n\nimport styleable from '../styleable'\n\nconst css = {\n  content: 'someHashFromALocalCssModule'\n}\n\nfunction mkFixture(css) {\n  class Subject extends React.Component {\n    render() {\n      return (\n        <div className={this.props.css.content} ref=\"content\">\n          Content {this.props.aDefault}\n        </div>\n      )\n    }\n  }\n\n  Subject.defaultProps = {\n    aDefault: 'still here'\n  }\n\n  return styleable(css)(Subject)\n}\n\nfunction mkFixtureWithReqPropTypes() {\n  class Subject extends React.Component {\n    render() {\n      return (\n        <div className={this.props.css.content} ref=\"content\">\n          Req content {this.props.aReqProp}\n        </div>\n      )\n    }\n  }\n\n  Subject.propTypes = {\n    aReqProp: PropTypes.string.isRequired\n  }\n\n  return styleable(css)(Subject)\n}\n\nfunction mkFunctionFixture(css) {\n  function subject(props) {\n    return (\n      <div className={props.css.content}>\n        Content {props.aDefault}\n      </div>\n    )\n  }\n  subject.defaultProps = {\n    aDefault: 'still here'\n  }\n\n  return styleable(css)(subject)\n}\n\nfunction mkFunctionFixtureWithReqPropTypes() {\n  function subject(props) {\n    return (\n      <div className={props.css.content}>\n        Req content {props.aReqProp}\n      </div>\n    )\n  }\n  subject.propTypes = {\n    aReqProp: PropTypes.string.isRequired\n  }\n\n  return styleable(css)(subject)\n}\n\ndescribe('styleable', () => {\n  it('creates a default stylesheet if none supplied', () => {\n    const defaultStylesheet = {}\n    const Subject = mkFixture()\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.props.css.should.eql(defaultStylesheet)\n  })\n\n  describe('with invalid stylesheet', () => {\n    it('rejects css as strings', () => {\n      ;(() => {\n        const Subject = mkFixture('nonCssObj')\n        TestUtils.renderIntoDocument(<Subject />)\n      }).should.throw(/must be an object/)\n    })\n\n    it('rejects css as array', () => {\n      ;(() => {\n        const Subject = mkFixture(['css', 'stuff'])\n        TestUtils.renderIntoDocument(<Subject />)\n      }).should.throw(/must be an object/)\n    })\n  })\n\n  it('wraps the component in a component', () => {\n    const Subject = mkFixture()\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.refs.should.not.have.property('content')\n  })\n\n  describe('with invalid selectors (superset)', () => {\n    it('rejects override styles that wont be used', done => {\n      const origCss = { content: 'hash' }\n      const overrideCss = { unusedSelector: 'anotherHash' }\n      const Subject = mkFixture(origCss)\n      try {\n        TestUtils.renderIntoDocument(<Subject css={overrideCss} />)\n      } catch (e) {\n        /*\n          Using this instead of (() => {}).should.throw()\n          Because I was getting this error:\n           TypeError: Cannot call a class as a function\n             at _classCallCheck (lib/styleable.js:23:34)\n             at CssStyleComponent (lib/styleable.js:31:35)\n             at Context.<anonymous> (lib/__specs__/styleable.spec.js:64:41)\n         */\n        e.message.should.match(/provide only selectors/)\n        done()\n      }\n    })\n\n    it('rejects compose styles that wont be used', done => {\n      const origCss = { content: 'hash' }\n      const overrideCss = { compose: { unusedSelector: 'anotherHash' } }\n      const Subject = mkFixture(origCss)\n      try {\n        TestUtils.renderIntoDocument(<Subject css={overrideCss} />)\n      } catch (e) {\n        e.message.should.match(/provide only selectors/)\n        done()\n      }\n    })\n  })\n\n  it('overrides original stylesheet', () => {\n    const newHash = 'anotherHash'\n    const origCss = { content: 'hash' }\n    const overrideCss = { content: newHash }\n    const Subject = mkFixture(origCss)\n    var component = TestUtils.renderIntoDocument(<Subject css={overrideCss} />)\n    ReactDOM.findDOMNode(component).className.should.eql(newHash)\n  })\n\n  it('composes new css', () => {\n    const origCss = { content: 'hash' }\n    const overrideCss = { compose: { content: 'anotherHash' } }\n    const Subject = mkFixture(origCss)\n    var component = TestUtils.renderIntoDocument(<Subject css={overrideCss} />)\n    ReactDOM.findDOMNode(component).className.should.eql('hash anotherHash')\n  })\n\n  it('lets defaultProps pass through', () => {\n    const Subject = mkFixture()\n    Subject.defaultProps.aDefault.should.exist\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.props.aDefault.should.eql('still here')\n  })\n\n  it('lets propTypes pass through', () => {\n    const Subject = mkFixtureWithReqPropTypes()\n    Subject.propTypes.aReqProp.should.exist\n  })\n\n  describe('with stateless functions', () => {\n    it('makes the css prop available', () => {\n      const css = { content: 'cssHash' }\n      const Subject = mkFunctionFixture(css)\n      const component = TestUtils.renderIntoDocument(\n        <div>\n          <Subject />\n        </div>\n      )\n      ReactDOM.findDOMNode(component).children[0].className.should.eql(\n        css.content\n      )\n    })\n\n    it('allows overrides to the stylesheet', () => {\n      const newHash = 'anotherHash'\n      const origCss = { content: 'hash' }\n      const overrideCss = { content: newHash }\n      const Subject = mkFunctionFixture(origCss)\n      const component = TestUtils.renderIntoDocument(\n        <div>\n          <Subject css={overrideCss} />\n        </div>\n      )\n      ReactDOM.findDOMNode(component).children[0].className.should.eql(newHash)\n    })\n\n    it('lets defaultProps pass through', () => {\n      const Subject = mkFunctionFixture()\n      Subject.defaultProps.aDefault.should.exist\n      const component = TestUtils.renderIntoDocument(\n        <div>\n          <Subject />\n        </div>\n      )\n      ReactDOM.findDOMNode(component).children[0].textContent.should.eql(\n        'Content still here'\n      )\n    })\n\n    it('lets propTypes pass through', () => {\n      const Subject = mkFunctionFixtureWithReqPropTypes()\n      /*\n        Not sure how to really test the real problem where warnings aren't\n        happening when a child component has been styleable'd. This at least\n        tests the fix for the real problem.\n      */\n      Subject.propTypes.aReqProp.should.exist\n    })\n  })\n})\n"]}