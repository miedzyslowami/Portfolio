var JSON = require('jsonstream2');
var React = require('./');


var App = React.createClass({
  getInitialState: function getInitialState() {
    return {
      i: 0
    };
  },
  componentDidMount: function componentDidMount() {
    this.interval = setInterval(this.tick, 500);
  },
  componentWillUnmount: function componentWillUnmount() {
    clearInterval(this.interval);
  },
  tick: function tick() {
    this.setState({
      i: this.state.i + 1
    });
  },
  render: function render() {
    return (<ul>
      <li key='my-li'>{this.state.i}</li>
    </ul>);
  }
});

var str = React.render(React.createElement(App));
str.pipe(JSON.stringify()).pipe(process.stdout);

setTimeout(function() {
  React.unmountComponentAtNode(str);
}, 2000);